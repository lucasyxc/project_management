import{_ as E,r as h,o as S,c as $,q as m,g as M,b as e,w as t,d as l,h as w,x as q,E as x,e as d,f as n,t as r,a as g}from"./index-B4OK-yx2.js";const I={class:"project-detail"},R={class:"card-header"},z={__name:"ProjectDetail",setup(A){const f=q(),s=h(null),i=h([]),y=a=>({planning:"info",active:"success",in_progress:"warning",completed:"success"})[a]||"info",v=a=>({planning:"规划中",active:"进行中",in_progress:"进行中",completed:"已完成",todo:"待办",review:"待审核"})[a]||a,k=a=>({low:"info",medium:"",high:"warning",urgent:"danger"})[a]||"",j=a=>({low:"低",medium:"中",high:"高",urgent:"紧急"})[a]||a,T=async()=>{try{const a=await w.get(`/api/projects/${f.params.id}/`);s.value=a.data}catch{x.error("加载项目详情失败")}},P=async()=>{try{const a=await w.get("/api/tasks/",{params:{project:f.params.id}});i.value=a.data.results||[]}catch{x.error("加载任务列表失败")}};return S(()=>{T(),P()}),(a,o)=>{const B=l("el-button"),c=l("el-descriptions-item"),_=l("el-tag"),C=l("el-progress"),N=l("el-descriptions"),b=l("el-card"),V=l("el-empty"),u=l("el-table-column"),D=l("el-table");return d(),$("div",I,[s.value?(d(),m(b,{key:0},{header:t(()=>[g("div",R,[g("h2",null,r(s.value.name),1),e(B,{onClick:o[0]||(o[0]=p=>a.$router.back())},{default:t(()=>[...o[1]||(o[1]=[n("返回",-1)])]),_:1})])]),default:t(()=>[e(N,{column:2,border:""},{default:t(()=>[e(c,{label:"项目描述",span:2},{default:t(()=>[n(r(s.value.description||"无"),1)]),_:1}),e(c,{label:"状态"},{default:t(()=>[e(_,{type:y(s.value.status)},{default:t(()=>[n(r(v(s.value.status)),1)]),_:1},8,["type"])]),_:1}),e(c,{label:"优先级"},{default:t(()=>[e(_,{type:k(s.value.priority)},{default:t(()=>[n(r(j(s.value.priority)),1)]),_:1},8,["type"])]),_:1}),e(c,{label:"负责人"},{default:t(()=>{var p;return[n(r((p=s.value.owner_detail)==null?void 0:p.username),1)]}),_:1}),e(c,{label:"进度"},{default:t(()=>[e(C,{percentage:s.value.progress},null,8,["percentage"])]),_:1}),e(c,{label:"开始日期"},{default:t(()=>[n(r(s.value.start_date||"未设置"),1)]),_:1}),e(c,{label:"结束日期"},{default:t(()=>[n(r(s.value.end_date||"未设置"),1)]),_:1})]),_:1})]),_:1})):M("",!0),e(b,{style:{"margin-top":"20px"}},{header:t(()=>[...o[2]||(o[2]=[g("h3",null,"项目任务",-1)])]),default:t(()=>[i.value.length===0?(d(),m(V,{key:0,description:"暂无任务"})):(d(),m(D,{key:1,data:i.value},{default:t(()=>[e(u,{prop:"title",label:"任务标题","min-width":"200"}),e(u,{prop:"assignee_name",label:"负责人",width:"120"}),e(u,{prop:"status",label:"状态",width:"100"},{default:t(({row:p})=>[e(_,{type:y(p.status)},{default:t(()=>[n(r(v(p.status)),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"due_date",label:"截止日期",width:"180"})]),_:1},8,["data"]))]),_:1})])}}},G=E(z,[["__scopeId","data-v-ead1ca43"]]);export{G as default};
