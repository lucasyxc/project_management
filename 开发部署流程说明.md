# å¼€å‘éƒ¨ç½²æµç¨‹è¯´æ˜

## ğŸ¯ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•ä»æœ¬åœ°å¼€å‘åˆ°æœåŠ¡å™¨éƒ¨ç½²çš„å®Œæ•´æµç¨‹ã€‚

---

## ğŸ”„ å®Œæ•´çš„å¼€å‘éƒ¨ç½²æµç¨‹

### ğŸ“ æ—¥å¸¸å¼€å‘æµç¨‹

#### 1ï¸âƒ£ æœ¬åœ°å¼€å‘

**å¼€å‘å‰ç«¯ï¼š**
```bash
cd frontend
npm run dev
```
è®¿é—®ï¼šhttp://localhost:5173

**å¼€å‘åç«¯ï¼š**
```bash
cd backend
python -m venv venv                    # åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
venv\Scripts\activate                  # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆWindowsï¼‰
# source venv/bin/activate             # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆLinux/Macï¼‰
pip install -r requirements.txt        # å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
python manage.py migrate               # æ•°æ®åº“è¿ç§»ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
python manage.py runserver
```
è®¿é—®ï¼šhttp://localhost:8000

---

#### 2ï¸âƒ£ å‰ç«¯æ‰“åŒ…å¹¶æ¨é€

```bash
# 1. æ‰“åŒ…å‰ç«¯
cd frontend
npm run build
cd ..

# 2. æ¨é€åˆ°Git
git add .
git commit -m "æ›´æ–°åŠŸèƒ½æè¿°"
git push
```

---

#### 3ï¸âƒ£ æœåŠ¡å™¨æ›´æ–°

```bash
# SSHç™»å½•æœåŠ¡å™¨
ssh ubuntu@1.14.110.116

# è¿›å…¥é¡¹ç›®ç›®å½•
cd ~/projects/project_management

# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin master
```

---

#### 4ï¸âƒ£ æ›´æ–°åç«¯ä¾èµ–å¹¶é‡å¯

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# æ›´æ–°ä¾èµ–
pip install -r requirements.txt

# æ•°æ®åº“è¿ç§»ï¼ˆå¦‚æœæœ‰æ–°çš„è¿ç§»ï¼‰
python manage.py migrate

# é‡å¯åç«¯ï¼ˆå¦‚æœæ˜¯ç”¨gunicornè¿è¡Œï¼‰
pkill -f gunicorn
nohup gunicorn --bind 0.0.0.0:8001 --workers 3 project_management.wsgi:application > gunicorn.log 2>&1 &
```

---

#### 5ï¸âƒ£ å‰ç«¯è‡ªåŠ¨æ›´æ–°

âœ… **å‰ç«¯ä¸éœ€è¦é‡å¯**ï¼

**åŸå› ï¼š**
- å‰ç«¯æ˜¯é™æ€æ–‡ä»¶ï¼ˆ`dist/`æ–‡ä»¶å¤¹ï¼‰
- Nginxä¼šè‡ªåŠ¨æœåŠ¡æœ€æ–°çš„é™æ€æ–‡ä»¶
- åªè¦ `git pull` æ‹‰å–äº†æ–°çš„ `dist/` æ–‡ä»¶ï¼Œå‰ç«¯å°±è‡ªåŠ¨æ›´æ–°äº†

---

## ğŸš€ ä¸€é”®éƒ¨ç½²è„šæœ¬ï¼ˆæ¨èï¼‰

### åˆ›å»ºéƒ¨ç½²è„šæœ¬

åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºè‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ï¼š

```bash
# åˆ›å»ºéƒ¨ç½²è„šæœ¬
nano ~/deploy.sh
```

### è„šæœ¬å†…å®¹

```bash
#!/bin/bash
echo "å¼€å§‹éƒ¨ç½²..."

# è¿›å…¥é¡¹ç›®ç›®å½•
cd ~/projects/project_management

# æ‹‰å–æœ€æ–°ä»£ç 
echo "æ‹‰å–æœ€æ–°ä»£ç ..."
git pull origin master

# è¿›å…¥åç«¯ç›®å½•
cd backend

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# æ›´æ–°ä¾èµ–
echo "æ›´æ–°ä¾èµ–..."
pip install -r requirements.txt

# æ•°æ®åº“è¿ç§»
echo "æ‰§è¡Œæ•°æ®åº“è¿ç§»..."
python manage.py migrate

# é‡å¯åç«¯æœåŠ¡
echo "é‡å¯åç«¯æœåŠ¡..."
pkill -f gunicorn
nohup gunicorn --bind 0.0.0.0:8001 --workers 3 project_management.wsgi:application > gunicorn.log 2>&1 &

echo "éƒ¨ç½²å®Œæˆï¼"
echo "è®¿é—®åœ°å€: http://1.14.110.116:8080"
```

### ä½¿ç”¨éƒ¨ç½²è„šæœ¬

```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x ~/deploy.sh

# è¿è¡Œéƒ¨ç½²è„šæœ¬
~/deploy.sh
```

---

## ğŸ“‹ ç®€åŒ–ç‰ˆæµç¨‹ï¼ˆæ‰‹åŠ¨ï¼‰

**æ¯æ¬¡æ›´æ–°åªéœ€è¦3æ­¥ï¼š**

### æ­¥éª¤1ï¼šæœ¬åœ°æ¨é€
```bash
# æ‰“åŒ…å¹¶æ¨é€
cd frontend && npm run build && cd ..
git add . && git commit -m "æ›´æ–°å†…å®¹" && git push
```

### æ­¥éª¤2ï¼šæœåŠ¡å™¨æ‹‰å–
```bash
# SSHç™»å½•å¹¶æ‹‰å–
ssh ubuntu@1.14.110.116
cd ~/projects/project_management && git pull origin master
```

### æ­¥éª¤3ï¼šé‡å¯åç«¯
```bash
# é‡å¯åç«¯æœåŠ¡
cd backend
source venv/bin/activate
pkill -f gunicorn
nohup gunicorn --bind 0.0.0.0:8001 --workers 3 project_management.wsgi:application > gunicorn.log 2>&1 &
```

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

### æœ¬åœ°å¼€å‘å‘½ä»¤

```bash
# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
cd frontend && npm run dev

# å¯åŠ¨åç«¯å¼€å‘æœåŠ¡å™¨
cd backend
venv\Scripts\activate                  # Windows
# source venv/bin/activate             # Linux/Mac
python manage.py runserver

# æ‰“åŒ…å‰ç«¯
cd frontend && npm run build

# Gitæ“ä½œ
git add .
git commit -m "æäº¤è¯´æ˜"
git push
```

### æœåŠ¡å™¨ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹åç«¯è¿›ç¨‹
ps aux | grep gunicorn

# æŸ¥çœ‹åç«¯æ—¥å¿—
tail -f ~/projects/project_management/backend/gunicorn.log

# é‡å¯Nginx
sudo systemctl reload nginx

# æŸ¥çœ‹NginxçŠ¶æ€
sudo systemctl status nginx

# æŸ¥çœ‹ç«¯å£å ç”¨
sudo netstat -tlnp | grep 8001
sudo netstat -tlnp | grep 8080
```

---

## ğŸŒ è®¿é—®åœ°å€

- **ç”Ÿäº§ç¯å¢ƒå‰ç«¯**: http://1.14.110.116:8080
- **ç”Ÿäº§ç¯å¢ƒæµ‹è¯•é¡µé¢**: http://1.14.110.116:8080/test
- **ç”Ÿäº§ç¯å¢ƒAPI**: http://1.14.110.116:8080/api/test/
- **ç®¡ç†åå°**: http://1.14.110.116:8080/admin

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. ç«¯å£é…ç½®
- **å‰ç«¯**: 8080ç«¯å£ï¼ˆNginxï¼‰
- **åç«¯**: 8001ç«¯å£ï¼ˆGunicornï¼‰
- **å¼€å‘å‰ç«¯**: 5173ç«¯å£ï¼ˆViteï¼‰
- **å¼€å‘åç«¯**: 8000ç«¯å£ï¼ˆDjangoï¼‰

### 2. æ–‡ä»¶ç»“æ„
```
é¡¹ç›®ç®¡ç†ç³»ç»Ÿ/
â”œâ”€â”€ backend/          # åç«¯ä»£ç ï¼ˆæ¨é€åˆ°Gitï¼‰
â”œâ”€â”€ frontend/         # å‰ç«¯æºç ï¼ˆä¸æ¨é€åˆ°Gitï¼‰
â”œâ”€â”€ dist/            # å‰ç«¯æ‰“åŒ…äº§ç‰©ï¼ˆæ¨é€åˆ°Gitï¼‰
â””â”€â”€ æ–‡æ¡£/            # è¯´æ˜æ–‡æ¡£ï¼ˆæ¨é€åˆ°Gitï¼‰
```

### 3. ç¯å¢ƒå˜é‡
- ç”Ÿäº§ç¯å¢ƒéœ€è¦é…ç½® `.env` æ–‡ä»¶
- å¼€å‘ç¯å¢ƒä½¿ç”¨é»˜è®¤é…ç½®å³å¯
- é…ç½®æ–‡ä»¶ï¼š`backend/env.production`ï¼ˆå¤åˆ¶åˆ°æœåŠ¡å™¨æ”¹åä¸º`.env`ï¼‰

### 4. æ•°æ®åº“
- **å¼€å‘ç¯å¢ƒ**ï¼šSQLiteï¼ˆæ— éœ€é…ç½®ï¼Œè‡ªåŠ¨ä½¿ç”¨ï¼‰
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šMySQLï¼ˆéœ€è¦å…ˆåˆ›å»ºæ•°æ®åº“ï¼Œè¯¦è§ `MySQLæ•°æ®åº“é…ç½®.md`ï¼‰
- æ•°æ®åº“ï¼š`project_management`ï¼ˆä¸æ—§é¡¹ç›®`lens_order_dev`å®Œå…¨éš”ç¦»ï¼‰

---

## ğŸ†˜ æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šå‰ç«¯è®¿é—®ä¸äº†
```bash
# æ£€æŸ¥NginxçŠ¶æ€
sudo systemctl status nginx

# æ£€æŸ¥8080ç«¯å£
sudo netstat -tlnp | grep 8080

# æ£€æŸ¥é˜²ç«å¢™
sudo ufw status
```

### é—®é¢˜2ï¼šåç«¯APIè®¿é—®ä¸äº†
```bash
# æ£€æŸ¥åç«¯è¿›ç¨‹
ps aux | grep gunicorn

# æ£€æŸ¥8001ç«¯å£
sudo netstat -tlnp | grep 8001

# æŸ¥çœ‹åç«¯æ—¥å¿—
tail -f gunicorn.log
```

### é—®é¢˜3ï¼šGitæ¨é€å¤±è´¥
```bash
# æ£€æŸ¥GitçŠ¶æ€
git status

# æ£€æŸ¥è¿œç¨‹ä»“åº“
git remote -v

# å¼ºåˆ¶æ¨é€ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
git push --force
```

### é—®é¢˜4ï¼šä¾èµ–å®‰è£…å¤±è´¥
```bash
# ä½¿ç”¨å›½å†…é•œåƒ
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple

# å‡çº§pip
pip install --upgrade pip
```

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–
- ä½¿ç”¨Gunicorn + Nginx
- å¯ç”¨Gzipå‹ç¼©
- é…ç½®é™æ€æ–‡ä»¶ç¼“å­˜
- ä½¿ç”¨CDNï¼ˆå¯é€‰ï¼‰

### 2. æ•°æ®åº“ä¼˜åŒ–
- é…ç½®æ•°æ®åº“è¿æ¥æ± 
- æ·»åŠ æ•°æ®åº“ç´¢å¼•
- å®šæœŸæ¸…ç†æ—¥å¿—

### 3. ç›‘æ§å»ºè®®
- é…ç½®æ—¥å¿—è½®è½¬
- ç›‘æ§æœåŠ¡å™¨èµ„æºä½¿ç”¨
- è®¾ç½®å¥åº·æ£€æŸ¥æ¥å£

---

## ğŸ¯ æ€»ç»“

ç°åœ¨æ‚¨æ‹¥æœ‰äº†å®Œæ•´çš„å¼€å‘éƒ¨ç½²ç¯å¢ƒï¼š

âœ… **æœ¬åœ°å¼€å‘ç¯å¢ƒ** - Vue3 + Django  
âœ… **ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ** - Git + GitHub  
âœ… **ç”Ÿäº§éƒ¨ç½²ç¯å¢ƒ** - Ubuntu + Nginx + Gunicorn  
âœ… **è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹** - ä¸€é”®éƒ¨ç½²è„šæœ¬  
âœ… **æµ‹è¯•éªŒè¯ç¯å¢ƒ** - å®Œæ•´çš„æµ‹è¯•é¡µé¢  

å¯ä»¥å¼€å§‹æ­£å¼çš„é¡¹ç›®å¼€å‘äº†ï¼ğŸš€

---

**æœ€åæ›´æ–°**: 2024å¹´10æœˆ17æ—¥  
**æœåŠ¡å™¨åœ°å€**: 1.14.110.116:8080  
**Gitä»“åº“**: https://github.com/lucasyxc/project_management.git
