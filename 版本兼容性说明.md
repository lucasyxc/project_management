# 版本兼容性说明

## 环境要求

### Python环境
- **Python版本**: 3.10+ (推荐 3.11, 3.12, 3.13)
- **当前测试版本**: Python 3.13.7 ✅

### Node.js环境
- **Node.js版本**: 16+ (推荐 18 LTS 或 20 LTS)
- **当前测试版本**: Node v20.11.0 ✅

## 后端依赖版本

### 核心框架
- **Django**: 5.0.9
  - 完全支持 Python 3.10, 3.11, 3.12, 3.13
  - 从Django 5.0开始正式支持Python 3.12+
  
- **Django REST Framework**: 3.15.2
  - 与Django 5.0完全兼容
  
### 主要依赖
- **django-cors-headers**: 4.5.0 (CORS支持)
- **djangorestframework-simplejwt**: 5.4.0 (JWT认证)
- **django-filter**: 24.3 (过滤功能)
- **drf-yasg**: 1.21.8 (API文档)
- **gunicorn**: 23.0.0 (生产服务器)
- **Pillow**: 11.0.0 (图片处理，Python 3.13兼容)

### 可选数据库驱动
- **PostgreSQL**: psycopg2-binary 2.9.10+
- **MySQL**: mysqlclient 2.2.6+

## 前端依赖版本

### 核心框架
- **Vue**: 3.5.13
  - 支持Node.js 16.20+, 18.x, 20.x
  
- **Vite**: 6.0.5
  - 需要Node.js 18+ 或 20+
  
### 主要依赖
- **Vue Router**: 4.5.0
- **Pinia**: 2.2.8 (状态管理)
- **Axios**: 1.7.9 (HTTP客户端)
- **Element Plus**: 2.9.1 (UI组件库)

## 版本更新说明

### Python 3.13 特别说明

Python 3.13.7 是2024年10月发布的最新版本，主要改进：
- 性能提升：比3.12快约20%
- 改进的错误消息
- 新的类型注解特性

**兼容性调整**：
1. ✅ Django 5.0+ 完全支持 Python 3.13
2. ✅ Pillow 11.0+ 提供 Python 3.13 预编译包
3. ✅ 所有其他依赖都已更新到兼容版本

### Node.js 20 LTS 说明

Node.js 20.11.0 是长期支持版本（LTS），优势：
- 稳定性好，适合生产环境
- 支持最新的ECMAScript特性
- 性能优秀
- 安全更新支持到2026年4月

## 依赖安装注意事项

### 后端依赖安装

```bash
cd backend
python -m venv venv
venv\Scripts\activate  # Windows
pip install -r requirements.txt
```

**可能遇到的问题**：

1. **Pillow编译问题**
   - Python 3.13 可能需要从源码编译某些包
   - 解决方案：确保安装了Visual C++ Build Tools (Windows)
   - 或使用：`pip install --upgrade Pillow`

2. **psycopg2 安装问题** (如果使用PostgreSQL)
   - Windows: 下载预编译包或使用 `psycopg2-binary`
   - Linux: `sudo apt-get install libpq-dev python3-dev`

### 前端依赖安装

```bash
cd frontend
npm install
```

**可能遇到的问题**：

1. **网络问题**
   - 使用国内镜像：`npm config set registry https://registry.npmmirror.com`
   
2. **版本冲突**
   - 清除缓存：`npm cache clean --force`
   - 删除node_modules：`rm -rf node_modules && npm install`

## 向后兼容性

### 如果使用较旧的Python版本

**Python 3.10 或 3.11**：
当前配置完全兼容，无需修改。

**Python 3.8 或 3.9**：
需要降级Django版本：
```txt
Django==4.2.17  # 4.2 LTS支持到2026年4月
```

### 如果使用较旧的Node.js版本

**Node.js 16**：
需要降级Vite：
```json
"vite": "^5.0.4"
```

**Node.js 14**（不推荐）：
需要降级多个包，建议升级Node.js。

## 生产环境建议

### 推荐配置
- **Python**: 3.11 或 3.12 (最稳定，生态成熟)
- **Node.js**: 20 LTS (长期支持)
- **数据库**: PostgreSQL 14+ 或 MySQL 8.0+
- **Web服务器**: Nginx 1.20+
- **进程管理**: Supervisor 或 systemd

### 为什么不在生产环境立即使用Python 3.13？

虽然Python 3.13已发布，但建议：
1. 等待2-3个月让生态成熟
2. 确保所有依赖都有稳定的预编译包
3. 进行充分的测试

对于新项目，Python 3.11或3.12是当前最佳选择。

## 测试环境

本项目已在以下环境测试：
- ✅ Windows 11 + Python 3.13.7 + Node 20.11.0
- ✅ Ubuntu 22.04 + Python 3.11.4 + Node 20.x
- ✅ macOS Ventura + Python 3.12.0 + Node 20.x

## 更新日志

### 2024-10-17
- 更新所有依赖以支持Python 3.13.7
- Django升级到5.0.9
- Pillow升级到11.0.0
- 前端依赖全面更新
- 添加版本兼容性文档

