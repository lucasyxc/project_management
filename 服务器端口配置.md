# æœåŠ¡å™¨ç«¯å£é…ç½®è¯´æ˜

## ğŸ”Œ ç«¯å£å†²çªè§£å†³æ–¹æ¡ˆ

### å½“å‰æƒ…å†µ
- âŒ 80ç«¯å£è¢«å ç”¨
- âŒ 8000ç«¯å£è¢«å ç”¨

### æ–°çš„ç«¯å£é…ç½®
- âœ… å‰ç«¯: **8080ç«¯å£**
- âœ… åç«¯: **8001ç«¯å£**

---

## ğŸ“ é…ç½®æ­¥éª¤

### 1. åç«¯é…ç½®ï¼ˆä½¿ç”¨8001ç«¯å£ï¼‰

#### å¼€å‘æ¨¡å¼
```bash
cd backend
python manage.py runserver 0.0.0.0:8001
```

#### ç”Ÿäº§æ¨¡å¼ï¼ˆGunicornï¼‰
```bash
cd backend
source venv/bin/activate
gunicorn --bind 0.0.0.0:8001 --workers 3 project_management.wsgi:application
```

#### Supervisoré…ç½®
ç¼–è¾‘ `/etc/supervisor/conf.d/project_backend.conf`:
```ini
[program:project_backend]
command=/path/to/é¡¹ç›®ç®¡ç†ç³»ç»Ÿ/backend/venv/bin/gunicorn --bind 127.0.0.1:8001 --workers 3 project_management.wsgi:application
directory=/path/to/é¡¹ç›®ç®¡ç†ç³»ç»Ÿ/backend
user=your-user
autostart=true
autorestart=true
stdout_logfile=/var/log/project_backend.log
```

é‡å¯æœåŠ¡ï¼š
```bash
sudo supervisorctl reread
sudo supervisorctl update
sudo supervisorctl restart project_backend
```

---

### 2. å‰ç«¯é…ç½®ï¼ˆNginxä½¿ç”¨8080ç«¯å£ï¼‰

#### Nginxé…ç½®æ–‡ä»¶
ç¼–è¾‘ `/etc/nginx/sites-available/project-management`:

```nginx
server {
    listen 8080;  # å‰ç«¯ç«¯å£
    server_name your-server-ip;  # æ”¹æˆä½ çš„æœåŠ¡å™¨IPæˆ–åŸŸå

    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /path/to/é¡¹ç›®ç®¡ç†ç³»ç»Ÿ/dist;  # æ”¹æˆå®é™…è·¯å¾„
        index index.html;
        try_files $uri $uri/ /index.html;
    }

    # åç«¯APIä»£ç†
    location /api/ {
        proxy_pass http://127.0.0.1:8001;  # åç«¯ç«¯å£
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # Djangoç®¡ç†åå°
    location /admin/ {
        proxy_pass http://127.0.0.1:8001;
        proxy_set_header Host $host;
    }

    # é™æ€æ–‡ä»¶
    location /static/ {
        alias /path/to/é¡¹ç›®ç®¡ç†ç³»ç»Ÿ/backend/staticfiles/;
    }

    # åª’ä½“æ–‡ä»¶
    location /media/ {
        alias /path/to/é¡¹ç›®ç®¡ç†ç³»ç»Ÿ/backend/media/;
    }
}
```

#### å¯ç”¨é…ç½®
```bash
# åˆ›å»ºè½¯é“¾æ¥
sudo ln -s /etc/nginx/sites-available/project-management /etc/nginx/sites-enabled/

# æµ‹è¯•é…ç½®
sudo nginx -t

# é‡æ–°åŠ è½½Nginx
sudo systemctl reload nginx
```

---

## ğŸŒ è®¿é—®åœ°å€

é…ç½®å®Œæˆåï¼Œè®¿é—®åœ°å€å¦‚ä¸‹ï¼š

- **å‰ç«¯é¦–é¡µ**: http://your-server-ip:8080
- **æµ‹è¯•é¡µé¢**: http://your-server-ip:8080/test
- **ç®¡ç†åå°**: http://your-server-ip:8080/admin
- **APIæ–‡æ¡£**: http://your-server-ip:8080/api/docs/
- **APIæµ‹è¯•**: http://your-server-ip:8080/api/test/
- **å¥åº·æ£€æŸ¥**: http://your-server-ip:8080/api/health/

---

## ğŸ”¥ é˜²ç«å¢™è®¾ç½®

ç¡®ä¿é˜²ç«å¢™å¼€æ”¾ç«¯å£ï¼š

### Ubuntu/Debian (UFW)
```bash
sudo ufw allow 8080/tcp
sudo ufw allow 8001/tcp
sudo ufw status
```

### CentOS/RHEL (firewalld)
```bash
sudo firewall-cmd --permanent --add-port=8080/tcp
sudo firewall-cmd --permanent --add-port=8001/tcp
sudo firewall-cmd --reload
```

### äº‘æœåŠ¡å™¨
è®°å¾—åœ¨äº‘æœåŠ¡å•†æ§åˆ¶å°çš„å®‰å…¨ç»„ä¸­å¼€æ”¾ **8080ç«¯å£**

---

## ğŸ” æµ‹è¯•ç«¯å£æ˜¯å¦å¯ç”¨

### æ£€æŸ¥ç«¯å£å ç”¨
```bash
# æ£€æŸ¥8001ç«¯å£
sudo netstat -tlnp | grep 8001
# æˆ–
sudo lsof -i :8001

# æ£€æŸ¥8080ç«¯å£
sudo netstat -tlnp | grep 8080
# æˆ–
sudo lsof -i :8080
```

### å¦‚æœè¿˜æ˜¯è¢«å ç”¨
é€‰æ‹©å…¶ä»–ç«¯å£ï¼Œä¾‹å¦‚ï¼š
- å‰ç«¯: 8888, 9000, 3000
- åç«¯: 8002, 9001, 5001

åªéœ€ä¿®æ”¹ä¸Šé¢é…ç½®ä¸­çš„ç«¯å£å·å³å¯ã€‚

---

## ğŸ“‹ å¿«é€Ÿæµ‹è¯•æ¸…å•

### âœ… åç«¯æµ‹è¯•
```bash
# ç›´æ¥è®¿é—®åç«¯
curl http://localhost:8001/api/test/

# åº”è¯¥è¿”å›JSON
{"status":"success","message":"åç«¯æœåŠ¡è¿è¡Œæ­£å¸¸ï¼",...}
```

### âœ… å‰ç«¯æµ‹è¯•
```bash
# æ£€æŸ¥Nginxæ˜¯å¦ç›‘å¬8080
sudo netstat -tlnp | grep 8080

# æµè§ˆå™¨è®¿é—®
http://your-server-ip:8080
```

### âœ… å®Œæ•´æµ‹è¯•
1. è®¿é—® http://your-server-ip:8080/test
2. ç‚¹å‡»"æµ‹è¯•åç«¯è¿æ¥"æŒ‰é’®
3. åº”è¯¥æ˜¾ç¤º"åç«¯è¿æ¥æˆåŠŸ"

---

## ğŸ’¡ æç¤º

1. æ¯æ¬¡ä¿®æ”¹Nginxé…ç½®åè¦é‡æ–°åŠ è½½ï¼š`sudo systemctl reload nginx`
2. æ¯æ¬¡ä¿®æ”¹åç«¯ä»£ç åè¦é‡å¯æœåŠ¡ï¼š`sudo supervisorctl restart project_backend`
3. æŸ¥çœ‹æ—¥å¿—å®šä½é—®é¢˜ï¼š
   - Nginx: `sudo tail -f /var/log/nginx/error.log`
   - åç«¯: `sudo tail -f /var/log/project_backend.log`

